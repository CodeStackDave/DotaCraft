// Tech Tree File
// Defines the requirements for being able to buy certain building/unit/upgrade

"tech_tree"
{
	// Building Creation - Builder Abilities
	// Treat buildings as Tech that can be destroyed
	// These abilities will show on the builder at all points, but as a disabled version that states the requirements if some of them aren't met.
	// To avoid having to search the building every time, each building will run a script on created/destroyed, to keep track of the current tech
	// The script will compare the requirements for any ability that mentions the created/destroyed unit, and update all builders accordingly.
	// Requirements aren't recursive, meaning if A is a requirement for B and B is a requirement for C, destroying A won't make you unable to build C as long as B is up.
	"human_build_blacksmith"
	{
		"human_town_hall"	"1"
	}

	"human_build_workshop"
	{
		"human_blacksmith"	"1"
		"human_keep"		"1"
	}

	"human_build_arcane_sanctum"
	{
		"human_blacksmith"	"1"
		"human_keep"		"1"
	}

	"human_build_gryphon_aviary"
	{
		"human_lumber_mill"	"1"
		"human_keep"		"1"
	}

	// Building Upgrade - Replaces the unit for a new one. Same as Building Creation but updates the building abilities instead
	// These abilities go on buildings, need to force the Max Level to 0 unlike builders
	"human_train_castle"
	{
		"human_altar_of_kings"	"1"
	}

	"human_train_cannon_tower"
	{
		"human_workshop"	"1"
	}

	"human_train_guard_tower"
	{
		"human_lumber_mill"	"1"
	}

	// Unit Creation - Disallow queing these units if the player doesnt have the required buildings.
	"human_train_rifleman"
	{
		"human_blacksmith"	"1"
	}

	"human_train_knight"
	{
		"human_blacksmith"	"1"
		"human_lumber_mill"	"1"
		"human_castle"		"1"
	}

	"human_train_spell_breaker"
	{
		"human_arcane_vault"	"1"
		"human_keep"			"1"
	}

	"human_train_siege_engine"
	{
		"human_castle"	"1"
	}

	"human_train_gryphon_rider"
	{
		"human_castle"		"1"
	}

	"human_train_dragonhawk_rider"
	{
		"human_arcane_vault"	"1"
	}

	// Technology Upgrades - Building abilities - Research
	// Destroying the building doesn't remove the upgrade, these are permanent until the game ends
	// Having the previous upgrade is not a requirement, as lvl 2-3 tech will only appear on the building whenever the first one is acquired
	// Tech Upgrade abilities are hidden once they are researched
	// Each time a unit spawns it should check for its upgrades. 
	// Each time an upgrade is finished, it should go through all the units and apply it.	
	
	// Town Hall / Keep / Castle
	"human_research_backpack"
	{
		"human_arcane_vault"	"1"
	}

	"human_backpack"
	{
		"research"	"1"
		"human_research_backpack"	"1"
	}


	// Barracks
	// "human_research_defend" has no requirements
	"human_defend"
	{
		"research"	"1"	//Look for the player.upgrades
		"human_research_defend"	"1"
	}

	"human_research_long_rifles" 
	{
		"human_keep"	"1"
	}
	"human_long_rifles" 
	{
		"research"	"1"
		"human_research_long_rifles"	"1"
	}

	"human_research_animal_war_training" 
	{
		"human_blacksmith"	"1"
		"human_lumber_mill"	"1"
		"human_castle"		"1"
	}
	"human_animal_war_training"
	{
		"research"	"1"
		"human_research_animal_war_training"	"1"
	}

	// Lumber Mill: Lumber Harvesting and Masonry.
	"human_research_lumber_harvesting1"
	{
		"human_keep"		"1"			
	}

	"human_research_lumber_harvesting2"
	{
		"human_castle"	"1"
	}

	"human_research_masonry2"
	{
		"human_keep"		"1"
	}

	"human_research_masonry3"
	{
		"human_castle"	"1"
	}

	// BlackSmith: 4 Upgrades for Melee, Plate, Ranged and Leather http://puu.sh/g2NQR/9d47f6c538.jpg
	// 1st level doesn't have requirement, 2nd level has Keep, 3rd level has Castle
	"human_research_forged_swords2" 
	{
		"human_keep"		"1"
	}

	"human_research_forged_swords3" 
	{
		"human_castle"	"1"
	}

	"human_research_plating2"
	{
		"human_keep"		"1"
	}

	"human_research_plating3" 
	{
		"human_castle"	"1"	
	}

	"human_research_ranged_weapons2" 
	{
		"human_keep"		"1"	
	}

	"human_research_ranged_weapons3" 
	{
		"human_castle"	"1"	
	}

	"human_research_leather_armor2" 
	{
		"human_keep"		"1"	
	}

	"human_research_leather_armor3" 
	{
		"human_castle"	"1"	
	}

	// Arcane Sanctum
	"human_dispel_magic"
	{
		"research"	"1"
		"human_research_priest_training1"	"1"
	}

	"human_research_priest_training2" 
	{
		"human_castle"	"1"
	}
	"human_inner_fire"
	{
		"research"	"1"
		"human_research_priest_training2"	"1"
	}

	"human_invisibility"
	{
		"research"	"1"
		"human_research_sorceress_training1"	"1"
	}
	

	"human_research_sorceress_training2" 
	{
		"human_castle"	"1"
	}
	"human_polymorph"
	{
		"research"	"1"
		"human_research_sorceress_training2"	"1"
	}

	"human_research_control_magic" 
	{
		"human_arcane_vault"	"1"
		"human_castle"		"1"
	}
	"human_control_magic"
	{
		"research"	"1"
		"human_research_control_magic"	"1"
	}

	// No slots for this in arcane sanctum, enabled by default
	//"human_research_magic_sentry" has no requirements
	//"human_magic_sentry"
	//{
	//	"research"	"1"
	//	"human_research_magic_sentry"	"1"
	//}
	//"human_reveal"
	//{
	//	"research"	"1"
	//	"human_research_magic_sentry"	"1"
	//}	

	// Workshop
	"human_research_flare"
	{
		"human_keep"		"1"
	}
	"human_flare"
	{
		"research"	"1"
		"human_research_flare"		"1"
	}

	"human_research_flak_cannons"
	{
		"human_castle"	"1"
	}
	"human_flak_cannons"
	{
		"research"	"1"
		"human_research_flak_cannons"	"1"
	}

	"human_research_flying_machine_bombs"
	{
		"human_castle"		"1"
	}
	"human_flying_machine_bombs"
	{
		"research"	"1"
		"human_research_flying_machine_bombs"		"1"
	}

	"human_research_fragmentation_shards"
	{
		"human_castle"		"1"
	}
	"human_fragmentation_shards"
	{
		"research"	"1"
		"human_research_fragmentation_shards"		"1"
	}

	"human_research_barrage"
	{
		"human_castle"		"1"
	}
	"human_barrage"
	{
		"research"	"1"
		"human_research_barrage"		"1"
	}

	// Gryphon Aviary
	"human_research_storm_hammers"
	{
		"human_castle"		"1"
	}
	"human_storm_hammers" 
	{
		"research"	"1"
		"human_research_storm_hammers"	"1"
	}

	"human_research_cloud"
	{
		"human_castle"		"1"
		"human_arcane_vault"	"1"
	}

	// Altar of Kings: Each additional hero requires a Town Hall upgrade (So 2nd hero requires a Keep, and 3rd a Castle)
	"human_train_archmage2"
	{
		"human_keep"	"1"
	}
	"human_train_mountain_king2"
	{
		"human_keep"	"1"
	}
	"human_train_paladin2"
	{
		"human_keep"	"1"
	}
	"human_train_blood_mage2"
	{
		"human_keep"	"1"
	}

	"human_train_archmage3"
	{
		"human_castle"	"1"
	}
	"human_train_mountain_king3"
	{
		"human_castle"	"1"
	}
	"human_train_paladin3"
	{
		"human_castle"	"1"
	}
	"human_train_blood_mage3"
	{
		"human_castle"	"1"
	}

	// Arcane Vault Items: 
	// Keep: Potion of Healing, Mana, TP Scroll, Ivory Tower
	// Castle: Orb of Fire, Staff of Sanctuary











	/// NIGHT ELVES ///
	// "nightelf_build_ancient_of_war" - No requirements
	"nightelf_build_ancient_of_lore"
	{
		"nightelf_tree_of_ages"	"1"
		"nightelf_hunters_hall"	"1"
	}
	
	"nightelf_build_ancient_of_wind"
	{
		"nightelf_tree_of_ages"	"1"
	}

	"nightelf_build_ancient_protector"
	{
		"nightelf_hunters_hall"	"1"
	}

	"nightelf_build_chimaera_roost"
	{
		"nightelf_tree_of_eternity"	"1"
		"nightelf_ancient_of_wind"	"1"
	}

	"nightelf_train_tree_of_eternity"
	{
		"nightelf_altar_of_elders"	"1"
	}
}